# Created by: Alexander Vereeken <Alexander88207@protonmail.com>
# Maintainer: Alexander Vereeken <Alexander88207@protonmail.com>

if [[ $TODO == *"Installation"* ]]; then

# Download
download http://nuts.itch.zone/download/windows

# Prefix
prefix-message
echo -e "\e[40;38;5;32mSet prefix to Windows 10\e[30;48;5;82m\e[0m"
WINEPREFIX=$NDIR/Games/$INST winetricks win10

# Installer
installer-message
WINEPREFIX=$NDIR/Games/$INST wine $DDIR/windows
rm $DDIR/windows
WINEPREFIX="$NDIR/Games/$INST" winetricks sandbox
fi

if [[ $TODO == *"Launcher"* ]]; then
ITCHVER=$(ls -a "$NDIR/Games/$LNCH/drive_c/users/$USER/Local Settings/Application Data/itch/" | grep "app-")
WINEPREFIX=$NDIR/Games/$LNCH wine "$NDIR/Games/$LNCH/drive_c/users/$USER/Local Settings/Application Data/itch/$ITCHVER/itch.exe"
fi

if [[ $TODO == *"Uninstallation"* ]]; then
rm -d -r "$NDIR/Games/$UNST"
rm -d -r "/usr/home/$USER/.local/share/applications/wine/Programs/Itch Corp"
fi

if [[ $OTR == *"Create a shortcut"* ]]; then
mkdir -p "/usr/home/$USER/.local/share/applications/wine/Programs/Itch Corp"
if [ -f "/usr/home/$USER/.local/share/applications/wine/Programs/Itch Corp/$CS.desktop" ]; then
rm "/usr/home/$USER/.local/share/applications/wine/Programs/Itch Corp/$CS.desktop"
fi
echo "[Desktop Entry]
Name=$CS
Exec=$NAME Launch $CS
Type=Application
StartupNotify=true
Icon=C840_itch-setup.0" >> "/usr/home/$USER/.local/share/applications/wine/Programs/Itch Corp/$CS.desktop"
fi
