# Created by: Alexander Vereeken <Alexander88207@protonmail.com>
# Maintainer: Alexander Vereeken <Alexander88207@protonmail.com>

if [[ $TODO == *"Installation"* ]]; then

# Download
download https://homura.magzu.net/games/TLauncher-MCL.exe
download https://homura.magzu.net/games/jre-windows.exe
download https://homura.magzu.net/games/Java.7z

# Prefix
prefix-message
echo -e "\e[40;38;5;32mSet prefix to Windows 10\e[30;48;5;82m\e[0m"
WINEPREFIX=$GDIR/$INST winetricks win10

# Installer
installer-message
info "The following java installation will not complete but thats OK! :)"
WINEPREFIX=$GDIR/$INST wine $DDIR/jre-windows.exe
mv $DDIR/TLauncher-MCL.exe $GDIR/$INST
rm -r -d -f "$GDIR/$INST/drive_c/Program Files/Java"
cd "$GDIR/$INST/drive_c/Program Files"
7z x $DDIR/Java.7z
mv "$GDIR/$INST/drive_c/Program Files/Java/jre1.8.0_271" "$GDIR/$INST/drive_c/Program Files/Java/jre1.8.0_51"
info "Please know this client freezes fast and is unstable, you maybe need to run it more than one times to get a stable state. Also please set the ram allocation to 1000MB"
warn "Now the most important thing, for the client to reach its stable state, you have to be patient and let the world load. That is, when you spawn, do not move, when you are sure that everything has loaded before you, you can slowly look around, if everything is loaded, you can move and play.

Note: During this procedure the client will crash several times, it is annoying at first but worth it."
rm $DDIR/jre-windows.exe
rm $DDIR/Java.7z
fi

if [[ $TODO == *"Launcher"* ]]; then
WINEPREFIX=$GDIR/$LNCH wine $GDIR/$LNCH/TLauncher-MCL.exe
fi

if [[ $TODO == *"Uninstallation"* ]]; then
rm -d -r -f "$GDIR/$UNST"
fi
