# Created by: Alexander Vereeken <Alexander88207@protonmail.com>
# Maintainer: Alexander Vereeken <Alexander88207@protonmail.com>

if [[ $TODO == *"Installation"* ]]; then

# Download
download http://redirect.wargaming.net/WGC/Wargaming_Game_Center_Install_EU.exe

# Prefix
prefix-message
WINEPREFIX="$GDIR/$INST" winetricks vcrun2015
WINEPREFIX="$GDIR/$INST" winetricks win7

# Installer
installer-message
WINEPREFIX="$GDIR/$INST" wine $DDIR/Wargaming_Game_Center_Install_EU.exe
rm $DDIR/Wargaming_Game_Center_Install_EU.exe
WINEPREFIX="$GDIR/$INST" winetricks sandbox
fi

if [[ $TODO == *"Launcher"* ]]; then
WINEPREFIX="$GDIR/$LNCH" wine "$GDIR/$LNCH/drive_c/Program Files/Wargaming.net/GameCenter/wgc.exe"
fi

if [[ $TODO == *"Uninstallation"* ]]; then
rm -d -r "$GDIR/$UNST"
rm -d -r /usr/home/$USER/.local/share/applications/wine/Programs/Wargaming.net
rm "/usr/home/$USER/Desktop/Game Center.desktop"
fi

if [[ $OTR == *"Create a shortcut"* ]]; then
mkdir -p /usr/home/$USER/.local/share/applications/wine/Programs/Wargaming.net
if [ -f "/usr/home/$USER/.local/share/applications/wine/Programs/Wargaming.net/Wargaming.net Game Center.desktop" ]; then
rm "/usr/home/$USER/.local/share/applications/wine/Programs/Wargaming.net/Wargaming.net Game Center.desktop"
fi
echo "[Desktop Entry]
Name=$CS
Exec=$NAME Launch '$CS'
Type=Application
StartupNotify=true
Icon=3CE7_wgc.0" >> "/usr/home/$USER/.local/share/applications/wine/Programs/Wargaming.net/Wargaming.net Game Center.desktop"
fi
