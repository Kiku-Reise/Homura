# Created by: Alexander Vereeken <Alexander88207@protonmail.com>
# Maintainer: Alexander Vereeken <Alexander88207@protonmail.com>

if [[ $TODO == *"Installation"* ]]; then

# Download
download http://update.anarchy-online.com/download/AO/AnarchyOnline_EP1.exe

# Prefix
prefix-message
WINEPREFIX="$GDIR/$INST" winetricks winxp

# Installer
warn "Please let the installer create an shortcut or you will unable to start the launcher later."
WINEPREFIX="$GDIR/$INST" wine $DDIR/AnarchyOnline_EP1.exe
rm $DDIR/AnarchyOnline_EP1.exe
WINEPREFIX="$GDIR/$INST" winetricks sandbox
fi

if [[ $TODO == *"Launcher"* ]]; then
env WINEPREFIX="$GDIR/$LNCH" wine C:\\windows\\command\\start.exe /Unix $GDIR/Anarchy\ Online/dosdevices/c:/ProgramData/Microsoft/Windows/Start\ Menu/Programs/Anarchy\ Online/Anarchy\ Online.lnk
fi

if [[ $TODO == *"Uninstallation"* ]]; then
rm -d -r "$GDIR/$UNST"
rm -d -r "/usr/home/$USER/.local/share/applications/wine/Programs/Anarchy Online"
rm "/usr/home/$USER/Desktop/Anarchy Online.desktop"
fi

if [[ $OTR == *"Create a shortcut"* ]]; then
info "We have told you to check/use the shortcut that the installer offer, sorry but no new shortcut for you!"
exec $NAME
fi
